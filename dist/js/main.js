let restaurants,neighborhoods,cuisines;var map,markers=[];document.addEventListener("DOMContentLoaded",e=>{DBHelper.registerServiceWorker(),this._toastsView=new Toast,fetchNeighborhoods(),fetchCuisines(),updateRestaurants()}),fetchNeighborhoods=(()=>{DBHelper.fetchNeighborhoods((e,t)=>{e&&(this._toastsView.create(e),!t)||(self.neighborhoods=t,fillNeighborhoodsHTML())})}),fillNeighborhoodsHTML=((e=self.neighborhoods)=>{const t=document.getElementById("neighborhoods-select");e.forEach(e=>{const s=document.createElement("option");s.innerHTML=e,s.value=e,t.append(s)})}),fetchCuisines=(()=>{DBHelper.fetchCuisines((e,t)=>{e&&(this._toastsView.create(e),!t)||(self.cuisines=t,fillCuisinesHTML())})}),fillCuisinesHTML=((e=self.cuisines)=>{const t=document.getElementById("cuisines-select");e.forEach(e=>{const s=document.createElement("option");s.innerHTML=e,s.value=e,t.append(s)})}),window.initMap=(()=>{self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),self.restaurants&&addMarkersToMap()}),updateRestaurants=(()=>{const e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),s=e.selectedIndex,a=t.selectedIndex,r=e[s].value,n=t[a].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(r,n,(e,t)=>{e&&(this._toastsView.create(e),!t)||(resetRestaurants(t),fillRestaurantsHTML(),Helper.lazyLoad())})}),resetRestaurants=(e=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(e=>e.setMap(null)),self.markers=[],self.restaurants=e}),fillRestaurantsHTML=((e=self.restaurants)=>{const t=document.getElementById("restaurants-list");e.forEach(e=>{t.append(createRestaurantHTML(e))})}),createRestaurantHTML=(e=>{const t=document.createElement("li"),s=DBHelper.imageUrlForRestaurant(e,!0),a=document.createElement("img");a.className="restaurant-img",a.classList.add("lazy"),a.src=s,a.setAttribute("data-src",DBHelper.imageUrlForRestaurant(e)),a.setAttribute("data-srcset",DBHelper.imageSRCSetUrlsForRestaurant(e,["1x","2x"])),a.alt=e.photograph?DBHelper.getPhotoDescription(e):"no picture found",t.append(a);const r=document.createElement("h3");r.innerHTML=e.name,r.title="restaurant name",t.append(r);const n=document.createElement("p");n.innerHTML=e.neighborhood,n.title="restaurant neighborhood",t.append(n);const o=document.createElement("p");o.innerHTML=e.address,o.title="restaurant address",t.append(o);const l=document.createElement("a");return l.innerHTML=`View More about ${e.name}`,l.title=`More details about the resturant ${e.name}`,l.href=DBHelper.urlForRestaurant(e),t.append(l),t}),addMarkersToMap=((e=self.restaurants)=>{e.forEach(e=>{const t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",()=>{window.location.href=t.url}),self.markers.push(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJtYXAiLCJtYXJrZXJzIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJEQkhlbHBlciIsInJlZ2lzdGVyU2VydmljZVdvcmtlciIsInRoaXMiLCJfdG9hc3RzVmlldyIsIlRvYXN0IiwiZmV0Y2hOZWlnaGJvcmhvb2RzIiwiZmV0Y2hDdWlzaW5lcyIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiZXJyb3IiLCJjcmVhdGUiLCJzZWxmIiwiZmlsbE5laWdoYm9yaG9vZHNIVE1MIiwic2VsZWN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwibmVpZ2hib3Job29kIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInZhbHVlIiwiYXBwZW5kIiwiZmlsbEN1aXNpbmVzSFRNTCIsImN1aXNpbmUiLCJ3aW5kb3ciLCJpbml0TWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJzY3JvbGx3aGVlbCIsImFkZE1hcmtlcnNUb01hcCIsImNTZWxlY3QiLCJuU2VsZWN0IiwiY0luZGV4Iiwic2VsZWN0ZWRJbmRleCIsIm5JbmRleCIsImZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZCIsInJlc2V0UmVzdGF1cmFudHMiLCJmaWxsUmVzdGF1cmFudHNIVE1MIiwiSGVscGVyIiwibGF6eUxvYWQiLCJtIiwic2V0TWFwIiwidWwiLCJyZXN0YXVyYW50IiwiY3JlYXRlUmVzdGF1cmFudEhUTUwiLCJsaSIsImltZ1NyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsImltYWdlIiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwic3JjIiwic2V0QXR0cmlidXRlIiwiaW1hZ2VTUkNTZXRVcmxzRm9yUmVzdGF1cmFudCIsImFsdCIsImdldFBob3RvRGVzY3JpcHRpb24iLCJuYW1lIiwidGl0bGUiLCJhZGRyZXNzIiwibW9yZSIsImhyZWYiLCJ1cmxGb3JSZXN0YXVyYW50IiwibWFya2VyIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImFkZExpc3RlbmVyIiwibG9jYXRpb24iLCJ1cmwiLCJwdXNoIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxZQUNGQyxjQUNBQyxTQUNGLElBQUlDLElBQ0FDLFFBQVUsR0FLZEMsU0FBU0MsaUJBQWlCLG1CQUFxQkMsSUFDN0NDLFNBQVNDLHdCQUNUQyxLQUFLQyxZQUFjLElBQUlDLE1BQ3ZCQyxxQkFDQUMsZ0JBQ0FDLHNCQU1GRixtQkFBcUIsTUFDbkJMLFNBQVNLLG1CQUFtQixDQUFDRyxFQUFPZixLQUM5QmUsSUFDRk4sS0FBS0MsWUFBWU0sT0FBT0QsSUFDbkJmLEtBSVBpQixLQUFLakIsY0FBZ0JBLEVBQ3JCa0IsNkJBT0pBLHNCQUF3QixFQUFDbEIsRUFBZ0JpQixLQUFLakIsaUJBQzVDLE1BQU1tQixFQUFTZixTQUFTZ0IsZUFBZSx3QkFDdkNwQixFQUFjcUIsUUFBUUMsSUFDcEIsTUFBTUMsRUFBU25CLFNBQVNvQixjQUFjLFVBQ3RDRCxFQUFPRSxVQUFZSCxFQUNuQkMsRUFBT0csTUFBUUosRUFDZkgsRUFBT1EsT0FBT0osT0FPbEJWLGNBQWdCLE1BQ2ROLFNBQVNNLGNBQWMsQ0FBQ0UsRUFBT2QsS0FDekJjLElBQ0ZOLEtBQUtDLFlBQVlNLE9BQU9ELElBQ25CZCxLQUlQZ0IsS0FBS2hCLFNBQVdBLEVBQ2hCMkIsd0JBT0pBLGlCQUFtQixFQUFDM0IsRUFBV2dCLEtBQUtoQixZQUNsQyxNQUFNa0IsRUFBU2YsU0FBU2dCLGVBQWUsbUJBRXZDbkIsRUFBU29CLFFBQVFRLElBQ2YsTUFBTU4sRUFBU25CLFNBQVNvQixjQUFjLFVBQ3RDRCxFQUFPRSxVQUFZSSxFQUNuQk4sRUFBT0csTUFBUUcsRUFDZlYsRUFBT1EsT0FBT0osT0FPbEJPLE9BQU9DLFFBQVUsTUFLZmQsS0FBS2YsSUFBTSxJQUFJOEIsT0FBT0MsS0FBS0MsSUFBSTlCLFNBQVNnQixlQUFlLE9BQVEsQ0FDN0RlLEtBQU0sR0FDTkMsT0FOUSxDQUNSQyxJQUFLLFVBQ0xDLEtBQU0sV0FLTkMsYUFBYSxJQUdYdEIsS0FBS2xCLGFBQ1B5QyxvQkFPSjFCLGtCQUFvQixNQUNsQixNQUFNMkIsRUFBVXJDLFNBQVNnQixlQUFlLG1CQUNsQ3NCLEVBQVV0QyxTQUFTZ0IsZUFBZSx3QkFFbEN1QixFQUFTRixFQUFRRyxjQUNqQkMsRUFBU0gsRUFBUUUsY0FFakJmLEVBQVVZLEVBQVFFLEdBQVFqQixNQUMxQkosRUFBZW9CLEVBQVFHLEdBQVFuQixNQUVyQ25CLFNBQVN1Qyx3Q0FBd0NqQixFQUFTUCxFQUFjLENBQUNQLEVBQU9oQixLQUMxRWdCLElBQ0ZOLEtBQUtDLFlBQVlNLE9BQU9ELElBQ25CaEIsS0FLUGdELGlCQUFpQmhELEdBQ2pCaUQsc0JBQ0FDLE9BQU9DLGdCQU9YSCxpQkFBbUIsQ0FBQ2hELElBRWxCa0IsS0FBS2xCLFlBQWMsR0FDUkssU0FBU2dCLGVBQWUsb0JBQ2hDSyxVQUFZLEdBR2ZSLEtBQUtkLFFBQVFrQixRQUFROEIsR0FBS0EsRUFBRUMsT0FBTyxPQUNuQ25DLEtBQUtkLFFBQVUsR0FDZmMsS0FBS2xCLFlBQWNBLElBTXJCaUQsb0JBQXNCLEVBQUNqRCxFQUFja0IsS0FBS2xCLGVBQ3hDLE1BQU1zRCxFQUFLakQsU0FBU2dCLGVBQWUsb0JBQ25DckIsRUFBWXNCLFFBQVFpQyxJQUNsQkQsRUFBRzFCLE9BQU80QixxQkFBcUJELFFBUW5DQyxxQkFBdUIsQ0FBQ0QsSUFDdEIsTUFBTUUsRUFBS3BELFNBQVNvQixjQUFjLE1BRTVCaUMsRUFBU2xELFNBQVNtRCxzQkFBc0JKLEdBQVksR0FDcERLLEVBQVF2RCxTQUFTb0IsY0FBYyxPQUNyQ21DLEVBQU1DLFVBQVksaUJBQ2xCRCxFQUFNRSxVQUFVQyxJQUFJLFFBQ3BCSCxFQUFNSSxJQUFNTixFQUNaRSxFQUFNSyxhQUFhLFdBQVl6RCxTQUFTbUQsc0JBQXNCSixJQUM5REssRUFBTUssYUFBYSxjQUFlekQsU0FBUzBELDZCQUE2QlgsRUFBWSxDQUFDLEtBQU0sUUFDM0ZLLEVBQU1PLElBQU9aLEVBQXFCLFdBQUkvQyxTQUFTNEQsb0JBQW9CYixHQUNuRSxtQkFDQUUsRUFBRzdCLE9BQU9nQyxHQUVWLE1BQU1TLEVBQU9oRSxTQUFTb0IsY0FBYyxNQUNwQzRDLEVBQUszQyxVQUFZNkIsRUFBV2MsS0FDNUJBLEVBQUtDLE1BQVEsa0JBQ2JiLEVBQUc3QixPQUFPeUMsR0FFVixNQUFNOUMsRUFBZWxCLFNBQVNvQixjQUFjLEtBQzVDRixFQUFhRyxVQUFZNkIsRUFBV2hDLGFBQ3BDQSxFQUFhK0MsTUFBUSwwQkFDckJiLEVBQUc3QixPQUFPTCxHQUVWLE1BQU1nRCxFQUFVbEUsU0FBU29CLGNBQWMsS0FDdkM4QyxFQUFRN0MsVUFBWTZCLEVBQVdnQixRQUMvQkEsRUFBUUQsTUFBUSxxQkFDaEJiLEVBQUc3QixPQUFPMkMsR0FFVixNQUFNQyxFQUFPbkUsU0FBU29CLGNBQWMsS0FNcEMsT0FMQStDLEVBQUs5Qyw2QkFBK0I2QixFQUFXYyxPQUMvQ0csRUFBS0YsMENBQTRDZixFQUFXYyxPQUM1REcsRUFBS0MsS0FBT2pFLFNBQVNrRSxpQkFBaUJuQixHQUN0Q0UsRUFBRzdCLE9BQU80QyxHQUVIZixJQU1UaEIsZ0JBQWtCLEVBQUN6QyxFQUFja0IsS0FBS2xCLGVBQ3BDQSxFQUFZc0IsUUFBUWlDLElBRWxCLE1BQU1vQixFQUFTbkUsU0FBU29FLHVCQUF1QnJCLEVBQVlyQyxLQUFLZixLQUNoRThCLE9BQU9DLEtBQUszQixNQUFNc0UsWUFBWUYsRUFBUSxRQUFTLEtBQzdDNUMsT0FBTytDLFNBQVNMLEtBQU9FLEVBQU9JLE1BR2hDN0QsS0FBS2QsUUFBUTRFLEtBQUtMIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVzdGF1cmFudHMsXHJcbiAgbmVpZ2hib3Job29kcyxcclxuICBjdWlzaW5lc1xyXG52YXIgbWFwXHJcbnZhciBtYXJrZXJzID0gW11cclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBkYXRhIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxyXG4gKi9cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChldmVudCkgPT4ge1xyXG4gIERCSGVscGVyLnJlZ2lzdGVyU2VydmljZVdvcmtlcigpO1xyXG4gIHRoaXMuX3RvYXN0c1ZpZXcgPSBuZXcgVG9hc3QoKTtcclxuICBmZXRjaE5laWdoYm9yaG9vZHMoKTtcclxuICBmZXRjaEN1aXNpbmVzKCk7XHJcbiAgdXBkYXRlUmVzdGF1cmFudHMoKTtcclxufSk7XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3JcclxuICAgICAgdGhpcy5fdG9hc3RzVmlldy5jcmVhdGUoZXJyb3IpO1xyXG4gICAgICBpZiAoIW5laWdoYm9yaG9vZHMpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGYubmVpZ2hib3Job29kcyA9IG5laWdoYm9yaG9vZHM7XHJcbiAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBuZWlnaGJvcmhvb2RzIEhUTUwuXHJcbiAqL1xyXG5maWxsTmVpZ2hib3Job29kc0hUTUwgPSAobmVpZ2hib3Job29kcyA9IHNlbGYubmVpZ2hib3Job29kcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xyXG4gIG5laWdoYm9yaG9vZHMuZm9yRWFjaChuZWlnaGJvcmhvb2QgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIGN1aXNpbmVzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmZldGNoQ3Vpc2luZXMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICB0aGlzLl90b2FzdHNWaWV3LmNyZWF0ZShlcnJvcik7XHJcbiAgICAgIGlmICghY3Vpc2luZXMpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGYuY3Vpc2luZXMgPSBjdWlzaW5lcztcclxuICAgIGZpbGxDdWlzaW5lc0hUTUwoKTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBjdWlzaW5lcyBIVE1MLlxyXG4gKi9cclxuZmlsbEN1aXNpbmVzSFRNTCA9IChjdWlzaW5lcyA9IHNlbGYuY3Vpc2luZXMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XHJcblxyXG4gIGN1aXNpbmVzLmZvckVhY2goY3Vpc2luZSA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBjdWlzaW5lO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gY3Vpc2luZTtcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cclxuICovXHJcbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xyXG4gIGxldCBsb2MgPSB7XHJcbiAgICBsYXQ6IDQwLjcyMjIxNixcclxuICAgIGxuZzogLTczLjk4NzUwMVxyXG4gIH07XHJcbiAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xyXG4gICAgem9vbTogMTIsXHJcbiAgICBjZW50ZXI6IGxvYyxcclxuICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxyXG4gIH0pO1xyXG5cclxuICBpZiAoc2VsZi5yZXN0YXVyYW50cykge1xyXG4gICAgYWRkTWFya2Vyc1RvTWFwKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHBhZ2UgYW5kIG1hcCBmb3IgY3VycmVudCByZXN0YXVyYW50cy5cclxuICovXHJcbnVwZGF0ZVJlc3RhdXJhbnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XHJcbiAgY29uc3QgblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xyXG5cclxuICBjb25zdCBjSW5kZXggPSBjU2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcbiAgY29uc3QgbkluZGV4ID0gblNlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG5cclxuICBjb25zdCBjdWlzaW5lID0gY1NlbGVjdFtjSW5kZXhdLnZhbHVlO1xyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3RbbkluZGV4XS52YWx1ZTtcclxuXHJcbiAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGN1aXNpbmUsIG5laWdoYm9yaG9vZCwgKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgdGhpcy5fdG9hc3RzVmlldy5jcmVhdGUoZXJyb3IpO1xyXG4gICAgICBpZiAoIXJlc3RhdXJhbnRzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRSZXN0YXVyYW50cyhyZXN0YXVyYW50cyk7XHJcbiAgICBmaWxsUmVzdGF1cmFudHNIVE1MKCk7XHJcbiAgICBIZWxwZXIubGF6eUxvYWQoKTtcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxucmVzZXRSZXN0YXVyYW50cyA9IChyZXN0YXVyYW50cykgPT4ge1xyXG4gIC8vIFJlbW92ZSBhbGwgcmVzdGF1cmFudHNcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gW107XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAvLyBSZW1vdmUgYWxsIG1hcCBtYXJrZXJzXHJcbiAgc2VsZi5tYXJrZXJzLmZvckVhY2gobSA9PiBtLnNldE1hcChudWxsKSk7XHJcbiAgc2VsZi5tYXJrZXJzID0gW107XHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICB1bC5hcHBlbmQoY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCkpO1xyXG4gIH0pO1xyXG4gIC8vYWRkTWFya2Vyc1RvTWFwKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MLlxyXG4gKi9cclxuY3JlYXRlUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCkgPT4ge1xyXG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuXHJcbiAgY29uc3QgaW1nU3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHRydWUpO1xyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcclxuICBpbWFnZS5jbGFzc0xpc3QuYWRkKCdsYXp5Jyk7XHJcbiAgaW1hZ2Uuc3JjID0gaW1nU3JjO1xyXG4gIGltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1zcmMnLCBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkpO1xyXG4gIGltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1zcmNzZXQnLCBEQkhlbHBlci5pbWFnZVNSQ1NldFVybHNGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIFsnMXgnLCAnMngnXSkpO1xyXG4gIGltYWdlLmFsdCA9IChyZXN0YXVyYW50LnBob3RvZ3JhcGgpID8gREJIZWxwZXIuZ2V0UGhvdG9EZXNjcmlwdGlvbihyZXN0YXVyYW50KSA6XHJcbiAgJ25vIHBpY3R1cmUgZm91bmQnO1xyXG4gIGxpLmFwcGVuZChpbWFnZSk7XHJcblxyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xyXG4gIG5hbWUudGl0bGUgPSAncmVzdGF1cmFudCBuYW1lJztcclxuICBsaS5hcHBlbmQobmFtZSk7XHJcblxyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICBuZWlnaGJvcmhvb2QuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uZWlnaGJvcmhvb2Q7XHJcbiAgbmVpZ2hib3Job29kLnRpdGxlID0gJ3Jlc3RhdXJhbnQgbmVpZ2hib3Job29kJztcclxuICBsaS5hcHBlbmQobmVpZ2hib3Job29kKTtcclxuXHJcbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcclxuICBhZGRyZXNzLnRpdGxlID0gJ3Jlc3RhdXJhbnQgYWRkcmVzcyc7XHJcbiAgbGkuYXBwZW5kKGFkZHJlc3MpO1xyXG5cclxuICBjb25zdCBtb3JlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gIG1vcmUuaW5uZXJIVE1MID0gYFZpZXcgTW9yZSBhYm91dCAke3Jlc3RhdXJhbnQubmFtZX1gO1xyXG4gIG1vcmUudGl0bGUgPSBgTW9yZSBkZXRhaWxzIGFib3V0IHRoZSByZXN0dXJhbnQgJHtyZXN0YXVyYW50Lm5hbWV9YDtcclxuICBtb3JlLmhyZWYgPSBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGxpLmFwcGVuZChtb3JlKVxyXG5cclxuICByZXR1cm4gbGlcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBtYXJrZXJzIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzIHRvIHRoZSBtYXAuXHJcbiAqL1xyXG5hZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxyXG4gICAgY29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm1hcCk7XHJcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsICgpID0+IHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtYXJrZXIudXJsXHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWxmLm1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG4gIH0pO1xyXG59XHJcbiJdfQ==
